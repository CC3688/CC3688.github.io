<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基础知识 | CC3688 blog</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="Just playing around">
    <link rel="preload" href="/assets/css/0.styles.1b5c6595.css" as="style"><link rel="preload" href="/assets/js/app.f104056c.js" as="script"><link rel="preload" href="/assets/js/2.f067c4ab.js" as="script"><link rel="preload" href="/assets/js/7.cbd050f5.js" as="script"><link rel="prefetch" href="/assets/js/10.f8c5fd4f.js"><link rel="prefetch" href="/assets/js/11.b682676a.js"><link rel="prefetch" href="/assets/js/12.5867ffda.js"><link rel="prefetch" href="/assets/js/13.0321094f.js"><link rel="prefetch" href="/assets/js/14.3afc9644.js"><link rel="prefetch" href="/assets/js/15.11d13f21.js"><link rel="prefetch" href="/assets/js/16.ca488a04.js"><link rel="prefetch" href="/assets/js/17.fc8ab246.js"><link rel="prefetch" href="/assets/js/18.5c079205.js"><link rel="prefetch" href="/assets/js/19.36f43c9f.js"><link rel="prefetch" href="/assets/js/20.65d0d020.js"><link rel="prefetch" href="/assets/js/21.10f15dcd.js"><link rel="prefetch" href="/assets/js/22.4ca71c07.js"><link rel="prefetch" href="/assets/js/23.32570f0e.js"><link rel="prefetch" href="/assets/js/24.8adaca1c.js"><link rel="prefetch" href="/assets/js/25.c4992757.js"><link rel="prefetch" href="/assets/js/26.9ee0f253.js"><link rel="prefetch" href="/assets/js/27.52469adf.js"><link rel="prefetch" href="/assets/js/28.5b696741.js"><link rel="prefetch" href="/assets/js/29.5e26473c.js"><link rel="prefetch" href="/assets/js/3.bb206f19.js"><link rel="prefetch" href="/assets/js/30.57fb3628.js"><link rel="prefetch" href="/assets/js/31.a080c0c7.js"><link rel="prefetch" href="/assets/js/32.4f9de202.js"><link rel="prefetch" href="/assets/js/33.8d6a7dcc.js"><link rel="prefetch" href="/assets/js/34.fd302504.js"><link rel="prefetch" href="/assets/js/35.361475c4.js"><link rel="prefetch" href="/assets/js/36.1a34c211.js"><link rel="prefetch" href="/assets/js/37.6be3a049.js"><link rel="prefetch" href="/assets/js/38.dc76c326.js"><link rel="prefetch" href="/assets/js/39.962b52ba.js"><link rel="prefetch" href="/assets/js/4.97b1d945.js"><link rel="prefetch" href="/assets/js/40.67266698.js"><link rel="prefetch" href="/assets/js/41.200a391d.js"><link rel="prefetch" href="/assets/js/42.c2ab3aca.js"><link rel="prefetch" href="/assets/js/43.aae04c82.js"><link rel="prefetch" href="/assets/js/44.687ab86b.js"><link rel="prefetch" href="/assets/js/45.96f413a8.js"><link rel="prefetch" href="/assets/js/46.fe6f40ac.js"><link rel="prefetch" href="/assets/js/47.5e0f7bd7.js"><link rel="prefetch" href="/assets/js/48.ae585f03.js"><link rel="prefetch" href="/assets/js/49.d654a153.js"><link rel="prefetch" href="/assets/js/5.63cb3433.js"><link rel="prefetch" href="/assets/js/50.20b14af3.js"><link rel="prefetch" href="/assets/js/51.c521dcb9.js"><link rel="prefetch" href="/assets/js/52.26491e4e.js"><link rel="prefetch" href="/assets/js/53.52d72321.js"><link rel="prefetch" href="/assets/js/6.345a20a1.js"><link rel="prefetch" href="/assets/js/8.93c436e5.js"><link rel="prefetch" href="/assets/js/9.5ceb8851.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1b5c6595.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">CC3688 blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/JS/" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/TS/" class="nav-link">
  TS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/tools/" class="nav-link">
  tools
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/backend/PHP/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/backend/Python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/backend/MySQL/" class="nav-link router-link-active">
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/framework/Angular/" class="nav-link">
  Angular
</a></li><li class="dropdown-item"><!----> <a href="/framework/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/framework/Adonis/" class="nav-link">
  Adonis
</a></li><li class="dropdown-item"><!----> <a href="/framework/Laravel/" class="nav-link">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/framework/Django/" class="nav-link">
  Django
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动" class="dropdown-title"><span class="title">移动</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mobile/小程序/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/mobile/RN/" class="nav-link">
  RN
</a></li><li class="dropdown-item"><!----> <a href="/mobile/Flutter/" class="nav-link">
  Flutter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/jingguan/" class="nav-link">
  经管
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/JS/" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/TS/" class="nav-link">
  TS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/tools/" class="nav-link">
  tools
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/backend/PHP/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/backend/Python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/backend/MySQL/" class="nav-link router-link-active">
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/framework/Angular/" class="nav-link">
  Angular
</a></li><li class="dropdown-item"><!----> <a href="/framework/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/framework/Adonis/" class="nav-link">
  Adonis
</a></li><li class="dropdown-item"><!----> <a href="/framework/Laravel/" class="nav-link">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/framework/Django/" class="nav-link">
  Django
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动" class="dropdown-title"><span class="title">移动</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mobile/小程序/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/mobile/RN/" class="nav-link">
  RN
</a></li><li class="dropdown-item"><!----> <a href="/mobile/Flutter/" class="nav-link">
  Flutter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/jingguan/" class="nav-link">
  经管
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/backend/MySQL/" class="sidebar-link">MySQL</a></li><li><a href="/backend/MySQL/basic.html" class="active sidebar-link">基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#统一字符编码" class="sidebar-link">统一字符编码</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#初识-sql-语句" class="sidebar-link">初识 SQL 语句</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#库操作" class="sidebar-link">库操作</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#存储引擎" class="sidebar-link">存储引擎</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#表的增删改查" class="sidebar-link">表的增删改查</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#数据类型" class="sidebar-link">数据类型</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#约束条件" class="sidebar-link">约束条件</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#两张表的关系" class="sidebar-link">两张表的关系</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#记录的增删改查" class="sidebar-link">记录的增删改查</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#查询" class="sidebar-link">查询</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#连表操作" class="sidebar-link">连表操作</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#子查询" class="sidebar-link">子查询</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#权限管理" class="sidebar-link">权限管理</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#navicat-工具" class="sidebar-link">navicat  工具</a></li><li class="sidebar-sub-header"><a href="/backend/MySQL/basic.html#pymysql" class="sidebar-link">pymysql</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="基础知识"><a href="#基础知识" class="header-anchor">#</a> 基础知识</h1> <h2 id="统一字符编码"><a href="#统一字符编码" class="header-anchor">#</a> 统一字符编码</h2> <ul><li>&gt;  表示 MySQL端终输入</li></ul> <h4 id="_1-查看编码"><a href="#_1-查看编码" class="header-anchor">#</a> 1 查看编码</h4> <div class="language- extra-class"><pre class="language-text"><code>mysql&gt; \s
</code></pre></div><p>其中 带 characterset 字段的 就是和编码有关的, 统一设置为 utf8 防止出现乱码</p> <h4 id="_2-设置"><a href="#_2-设置" class="header-anchor">#</a> 2 设置</h4> <p>在配置文件配置,  在安装根目录下 创建 my.ini  并写好配置,  多少项目根据需要自己配置</p> <div class="language- extra-class"><pre class="language-text"><code>[mysql]                 // mysql 客户端 专用的配置
default-character-set=utf8

[mysqld]                    // 以下 针对 mysql 服务端进行配置
port=3306
basedir=D:/program/phpstudy_pro/Extensions/MySQL5.7.26/
datadir=D:/program/phpstudy_pro/Extensions/MySQL5.7.26/data/
character-set-server=utf8
default-storage-engine=MyIsam
max_connections=100
collation-server=utf8_unicode_ci
init_connect='SET NAMES utf8'
innodb_buffer_pool_size=64M
innodb_flush_log_at_trx_commit=1
innodb_lock_wait_timeout=120
innodb_log_buffer_size=4M
innodb_log_file_size=256M
interactive_timeout=120
join_buffer_size=2M
key_buffer_size=32M
log_error_verbosity=1
max_allowed_packet=16M
max_heap_table_size=64M
myisam_max_sort_file_size=64G
myisam_sort_buffer_size=32M
read_buffer_size=512kb
read_rnd_buffer_size=4M
server_id=1
skip-external-locking=on
sort_buffer_size=256kb
table_open_cache=256
thread_cache_size=16
tmp_table_size=64M
wait_timeout=120

[client]              // 只要是客户端都用这个配置, 如java  php  python
port=3306
default-character-set=utf8
</code></pre></div><h2 id="初识-sql-语句"><a href="#初识-sql-语句" class="header-anchor">#</a> 初识 SQL 语句</h2> <p>SQL语言分为3种类型</p> <ul><li><p>DDL语句: 数据库定义语言:　数据库, 表, 视图, 索引, 存储过程，　如：creat drop alter</p></li> <li><p>DML语句: 数据库操作语言: 插入数据insert, 删除数据delete, 更新数据update, 查询数据select</p></li> <li><p>DCL语句: 数据库控制语言: 例如控制用户的访问权限grant, revoke</p></li></ul> <h4 id="操作文件夹-库"><a href="#操作文件夹-库" class="header-anchor">#</a> 操作文件夹(库)</h4> <div class="language- extra-class"><pre class="language-text"><code>// 增
&gt; create database db1 charset utf8;

// 查
&gt; show create database db1;               // 查看单个数据库 详情
&gt; show databases;                          // 查看所有数据

// 改
&gt; alter database db1 charset gbk;          

// 删
&gt; drop database db1;
</code></pre></div><h4 id="操作文件-表"><a href="#操作文件-表" class="header-anchor">#</a> 操作文件(表)</h4> <div class="language- extra-class"><pre class="language-text"><code>//切换文件夹
&gt;　use db1;

//查看当前所在文件夹
&gt; select database()

// 增
&gt; create table t1(id int, name char);

// 查
&gt; show create table t1;
&gt; show tables;
&gt; desc t1;

// 改
&gt; alter table t1 modify name char(6);   //改name 字段
&gt; alter table t1 change name NAME char(7);  // 改字段name  为NAME

// 删
&gt; drop table t1;
</code></pre></div><h4 id="操作文件内容-记录"><a href="#操作文件内容-记录" class="header-anchor">#</a> 操作文件内容(记录)</h4> <div class="language- extra-class"><pre class="language-text"><code>// 增
&gt; insert t1(id, name) values (1, 'yycu01'), (2, 'yycu02'), (3, 'yycu03');
&gt; insert t1 values (1, 'yycu01'), (2, 'yycu02'), (3, 'yycu03'); // 不指定字段顺序,则安字段在表中的顺序
// 查
&gt; select id, name from db1.t1;
&gt; select id, name from t1;    //  不加库名, 默认是在当前库下的t1表
&gt; select * from t1;   // * 表示所有字段

// 改
&gt; update db1.t1 set name=&quot;yycu&quot;;  // 没有指定where 条件则会,全改了
&gt; update db1.t1 set name=&quot;yycu&quot; where id=2;

// 删
&gt; delete from t1;  // 全删除了
&gt; delete from t1 where id = 1; //删除指定的

</code></pre></div><h2 id="库操作"><a href="#库操作" class="header-anchor">#</a> 库操作</h2> <h4 id="自带的库"><a href="#自带的库" class="header-anchor">#</a> 自带的库</h4> <ul><li>information_schema: 虚拟库, 不点磁盘空间, 存储的是数据库启动后的一些参数,如用户表信息,列信息,权限信息,字符信息等.</li> <li>performance_schema: mysql5.5 开始新增的一个数据库, 主要用于收集数据库服务器性能参数,记录处理查询请求时发生的各种事件,锁等现象.</li> <li>mysql: 授权库,主要存储系统用户的权限信息</li> <li>test: mysql 数据库系统自动创建的测试数据库</li></ul> <h4 id="创建数据库存"><a href="#创建数据库存" class="header-anchor">#</a> 创建数据库存</h4> <p><strong>查看帮助</strong></p> <div class="language- extra-class"><pre class="language-text"><code>&gt;help create     
&gt;help create database
其中 [] 表示可有可无, 其它的必须有
{a|b}  代表必须有, a 或 b
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>//1 语法
&gt; create database 数据库名 charset utf8;

//2 命名规则
数字,下划线, @, #, $
区分大小写,
唯一
不要用关键字
不要单独使用数字
最长128位
</code></pre></div><h2 id="存储引擎"><a href="#存储引擎" class="header-anchor">#</a> 存储引擎</h2> <p>存储引擎就是表的类型</p> <h4 id="查看mysql支持的引擎"><a href="#查看mysql支持的引擎" class="header-anchor">#</a> 查看mysql支持的引擎</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; show engines;              // 用 InnoDB  
</code></pre></div><h4 id="指定表类型-存储引擎"><a href="#指定表类型-存储引擎" class="header-anchor">#</a> 指定表类型/存储引擎</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt;create table t1(id int)engine=innodb;
&gt; create table t3(id int) charset utf8 engine=innodb;   //指定字符 在 引擎前面
</code></pre></div><h2 id="表的增删改查"><a href="#表的增删改查" class="header-anchor">#</a> 表的增删改查</h2> <h4 id="创建表"><a href="#创建表" class="header-anchor">#</a> 创建表</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; create table 表名(
    字段名1 类型[(宽度) 约束条件],
    字段名2 类型[(宽度) 约束条件],
    字段名3 类型[(宽度) 约束条件]
)

# 注意
1. 同一张表中,字段不能重名
2. 宽度和约束条件可选
3. 字段名和类型是必须的
</code></pre></div><h4 id="查看表信息"><a href="#查看表信息" class="header-anchor">#</a> 查看表信息</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; show create table t1;   
&gt; show create table t1\G;     // 一行一行显示   


&gt; desc  t1;
</code></pre></div><h4 id="修改表结构"><a href="#修改表结构" class="header-anchor">#</a> 修改表结构</h4> <div class="language- extra-class"><pre class="language-text"><code>// 1 修改表名
&gt; alter table 表名 rename 新表名;

// 2 增加字段
&gt; alter table 表名 add 字段名 数据类型[完整性约束条件], add 字段名2 数据类型[完成约束条件];
                                    //可以添加多个,也可以添加一个, 后面的字段也要带add

&gt; alter table 表名 add 字段名 数据类型[完整约束条件] first;    // 指定插入的位置
&gt; alter table 表名 add 字段名 数据类型[完整约束条件] after 字段名; // 插入指定字段后

// 3 删除字段
&gt; alter table 表名 drop 字段名;

// 4 修改字段
&gt; alter table 表名 modify 字段名 数据类型 [完整约束条件];
&gt; alter table 表名 change 旧字段名 新字段名 旧数据类型 [完整约束条件];
&gt; alter table 表名 change 旧字段名 新字段名 新数据类型 [完整约束条件];
</code></pre></div><h4 id="复制表"><a href="#复制表" class="header-anchor">#</a> 复制表</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; create table t1 select 字段1, 字段2 from t2;  //把t1 查出的字段复制到一张新表 t1; 表结构,记录也复制过来的

&gt; create table t1 select 字段1, 字段2 from t2 where 1&gt; 5;//查不到记录, 只复制了表结构

&gt; create table t1 like t2; //只复制 t2的表结构


</code></pre></div><h4 id="删除表"><a href="#删除表" class="header-anchor">#</a> 删除表</h4> <blockquote><p>drop table 表名;</p></blockquote> <h2 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h2> <table><thead><tr><th>类型</th> <th>大小</th> <th>范围(有符号)</th> <th>范围(无符号)</th> <th>用途</th></tr></thead> <tbody><tr><td>tinyint</td> <td>1字节</td> <td>(-128,127)</td> <td>(0,255)</td> <td>小整数值</td></tr> <tr><td>smallint</td> <td>2字节</td> <td>(-32 768, 32 767)</td> <td>(0, 65 535)</td> <td>大整数值</td></tr> <tr><td>mediumint</td> <td>3字节</td> <td>(-8 388 608, 8 388 607)</td> <td>(0, 16 777 215)</td> <td>大整数值</td></tr> <tr><td>int或integer</td> <td>4字节</td> <td>(-2 147 483 648, 2 147 483 647)</td> <td>(0, 4 294 967 295)</td> <td>大整数值</td></tr> <tr><td>bigint</td> <td>8字节</td> <td></td> <td></td> <td>极大整数值</td></tr> <tr><td>float</td> <td>4字节</td> <td></td> <td></td> <td>单精度 浮点数值</td></tr> <tr><td>double</td> <td>8字节</td> <td></td> <td></td> <td>双精度 浮点数值</td></tr> <tr><td>decimal</td> <td>对decimal(m,d),<br>如果m&gt;d为m+2,否则为d+2</td> <td>依赖于m和d的值</td> <td>依赖于m和d的值</td> <td>小数值</td></tr></tbody></table> <h4 id="整型"><a href="#整型" class="header-anchor">#</a> 整型</h4> <p>int 的存储宽度为4个bytes(8位) 即 32个bit 即 2**32</p> <p>默认是有符号的,  无符号需要声明</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; create table t1(x tinyint unsigned);

&gt; create table t1(x int(1) unsigned zerofill); 
         //注意 ,整型类型不要(1)来限制宽度,它限制的是显示宽度, 
         //不是限制存储宽度, 存储宽度是mysql限制死了的,用不同的整型类型就是不同的存储宽度
         //显示宽度是指 在select 查询显示 结果时, 它显示的宽度而已,如果没有设置 填充,就留空
         //有就填充到指定的显示宽度
         // 一般不指定显示宽度, 自动会设置到刚好显示最大的位数
</code></pre></div><h4 id="浮点类型"><a href="#浮点类型" class="header-anchor">#</a> 浮点类型</h4> <p>floate double decimal</p> <div class="language- extra-class"><pre class="language-text"><code># float(m, d) [unsigned] [zerofill]

单精度浮点数(非准确小数值), m是数字总个数, d是小数点后个数, m最大是255, d最大值为30


# double(m, d) [unsigned] [zerofill]

双精度浮点数(非准确小数值), m是数字总个数, d是小数点后个数, m最大是255, d最大值为30


# decimal(m, d) [unsigned] [zerofill]

准确小数值, m是数字总个数, d是小数点后个数, m最大是65, d最大值为30


它们的区别是精度不一样
上面两个整数位大, decimal整数位小但精确

通常前两个就够用了, 除你要造原子强弹,火箭, 才考虑decimal

</code></pre></div><h4 id="日期类型"><a href="#日期类型" class="header-anchor">#</a> 日期类型</h4> <div class="language- extra-class"><pre class="language-text"><code>create table student(
    id int,
    name char(6),
    born_year year,
    birth_date date,
    class_time time,
    reg_time datetime
);
insert into student values (1, 'yycu', now(), now(), now(), now());
//   1  yycu  2020  2020-06-20  17:33:35   2020-06-20 17:33:35 
// &gt; \c   可以终止运行  如果有引号没配对, 则停不了, 需要先加上引号,再 \c才终止
</code></pre></div><p><strong>datetime与timestamp的区别</strong>
大部分应用还是用 datetime</p> <table><thead><tr><th></th> <th>datetime</th> <th>timestamp</th></tr></thead> <tbody><tr><td>日期范围</td> <td>1001-9999年</td> <td>1970-2038年</td></tr> <tr><td>时区</td> <td>与时区无关</td> <td>与时区有关</td></tr> <tr><td>存储空间</td> <td>8字节</td> <td>4字节</td></tr> <tr><td>默认值</td> <td>null</td> <td>不能为空,默认当前时间<br>(current_timestamp)</td></tr></tbody></table> <h4 id="字符类型"><a href="#字符类型" class="header-anchor">#</a> 字符类型</h4> <table><thead><tr><th></th> <th>char</th> <th>varchar</th></tr></thead> <tbody><tr><td>长度</td> <td>定长</td> <td>变长</td></tr> <tr><td></td> <td>简单,粗暴,储存快,查询快</td> <td>复杂,慢</td></tr> <tr><td></td> <td>浪费空间</td> <td>节省空间</td></tr></tbody></table> <p>一般使用char 类型</p> <p>还有其它 可以存很长长度的类型</p> <p>但数据库不应该存很长的类型, 可以想其它解决办法</p> <div class="language- extra-class"><pre class="language-text"><code># 宽度指的是字符的个数  下面两个都是最多只能存5个字
create table t1(name char(5));    // 不够也被全5个字符, 补空格  (定长, 一定要达到指定的长度)

create table t1(name varchar(5));  // 不够就不够,有几个就存几个,但不超过5 (长度可以变,不超过5就行)

// 末尾的空格, 存储时会存进去, 但取的时间, 会被省略掉, where = 比较时, 不管末尾的空格
// 前面的空格不去掉的,  只去末尾
// where like  不适用这条规则

// 它们存的时
name char(5)   定长会被空格, 每一个都是5个, 取值,直接定长5个5个的取
egon |alex |wxx  |

name varchar(5) 可以变长度, 它还需要存它自己的长度
egon|alex|wxx|
// 要在开头加一个 byte 来存它自已的长度, 长度过大, 保存长度的byte就需要也多个(最多2个)
1bytes+egon|1bytes+alex|1bytes+wxx
4+egon|4+alex|3+wxx


//
</code></pre></div><h4 id="枚举类型-集合类型"><a href="#枚举类型-集合类型" class="header-anchor">#</a> 枚举类型  集合类型</h4> <div class="language- extra-class"><pre class="language-text"><code>create table consumer(
    id int,
    name char(16),
    sex enum('male', 'female', 'ohter'),
    level enum('vip1', 'vip2', 'vip3'),
    hobbies set('play', 'music', 'read', 'run')
)

insert into consumer values(1, 'yycu', 'male', 'vip2', 'read');
</code></pre></div><h2 id="约束条件"><a href="#约束条件" class="header-anchor">#</a> 约束条件</h2> <p>创建表时对字段的约束条件</p> <h4 id="not-null-与-default"><a href="#not-null-与-default" class="header-anchor">#</a> not null 与 default</h4> <div class="language- extra-class"><pre class="language-text"><code>create table t1(
    id int(11) unsigned zerofill, //id 被 int(11)限制,  在此 数据类型的基础之上,再被 unsigned 限制
)

create table t1(
    id int,
    name char(6), 
    sex enum('male','female') not null default 'male'
)
</code></pre></div><h4 id="unique-key"><a href="#unique-key" class="header-anchor">#</a> unique key</h4> <div class="language- extra-class"><pre class="language-text"><code>// 方法一   单列唯一
create table department (
    id int unique,
    name char(10) unique
);

// 方法二 单列唯一
create table department (
    id int,
    name char(10),
    unique(id),
    unique(name)
);

// 联合唯一
create table services (
    id int,
    ip char(15),
    port int,
    unique(id),    // 单列唯一
    unique(ip, port)   //联合唯一, 两个字段合起来是唯一的,不合,单独,是可以重复的
)

</code></pre></div><h4 id="primary-key"><a href="#primary-key" class="header-anchor">#</a> primary key</h4> <p>主键, not null unique</p> <p>存储引擎(innodb): 对于innodb存储引擎来说, 一张表内必须有一个主键.</p> <p>如果没有,mysql 一旦识别是innodb表,则会找一个 not null unique的字段来做主键</p> <p>如果 也没有,就用一个隐藏的主键</p> <div class="language- extra-class"><pre class="language-text"><code># 单列主键
create table t1(
    id int primary key,
    name char(16)
);


# 复合主键
create table t1(
    ip char(15),
    port int,
    primary key(ip, port)
);

</code></pre></div><h4 id="auto-increment"><a href="#auto-increment" class="header-anchor">#</a> auto_increment</h4> <div class="language- extra-class"><pre class="language-text"><code>create table t1(
    id int primary key auto_increment,
    name char(16)
);

这样就不用给id 传值 ,当然,你也可以传, 只要符合不为空,且唯一就可以了
当下次自动增加会从你上次传入的值,开始自动增加,就是从上一条记录开始自动增长

// 清空表

delete from t1;
 //注意,此时这张表的id是自增长的,它的值 没有重置, 下次插入,会在上一次的值加1 
 //delete 适合删除指定范围的行, 和where 配全使用

 //清空表用 下面这个,才是正解
 truncate t1;   // 才会 重置id的自增长记录
</code></pre></div><h4 id="foreign-key"><a href="#foreign-key" class="header-anchor">#</a> foreign key</h4> <div class="language- extra-class"><pre class="language-text"><code># 先建被关联的表, 并且保证被关联的字段唯一
create table dep(
    id int primary key ,
    name char(16),
    commnent char(50)
)


# 再建立关联的表
create table emp(
    id int primary key,
    name char(10),
    sex enum('male', 'female'),
    dep_id int,
    foreign key(dep_id) references dep(id)
    on delete cascade       //还需要这个
    on update cascade,      //还需要这个 
)
</code></pre></div><ul><li>要先建立 关联的表</li> <li>并保证关联字段 唯一</li> <li>插入数据里, 关联的表要先有数据, 然后再插入</li> <li>两张表, 藕和在一起了</li> <li>一般在项目中, 一般不要这样子做, 在程序逻辑里控制</li></ul> <p><strong>删除的时候</strong></p> <ul><li>要先删除表里的数据 ,然后才能删除关联表里的数据</li> <li>先删除关联表里的数据, 如果有被关联的数据,则会报错</li></ul> <h2 id="两张表的关系"><a href="#两张表的关系" class="header-anchor">#</a> 两张表的关系</h2> <p>要判断两张表的关系,需要先后,站在左表和右表,来看,来确定</p> <h4 id="多对一"><a href="#多对一" class="header-anchor">#</a> 多对一</h4> <p>左边表的多条记录,能对应上右边表的一条记录, 也可以返过来说是一对多, 只是站的表不同</p> <p>例:　　出版社　　　　书
先站在　出版社，</p> <h4 id="多对多"><a href="#多对多" class="header-anchor">#</a> 多对多</h4> <p>双向的多对一， 叫做多对多， 不能通过在表里建一个外键，来达到关联的关系</p> <p>因为他们都需要要有对方， 需要建一引新的表来 存他们的关系</p> <p>如  author表   book表</p> <p>然后建一张 author2book 来存他们的关联关系，</p> <p>作者    书</p> <h4 id="一对一"><a href="#一对一" class="header-anchor">#</a> 一对一</h4> <p>客户   学生   （每一个都是客户，  只有报名了，才是学生）</p> <p>（客户表先有， 学生表后有， 在后有的表加字段）</p> <p>在  学生里 加一个 字段 存 客户的id, 它是一个外键， 唯一</p> <h2 id="记录的增删改查"><a href="#记录的增删改查" class="header-anchor">#</a> 记录的增删改查</h2> <h4 id="insert"><a href="#insert" class="header-anchor">#</a> insert</h4> <div class="language- extra-class"><pre class="language-text"><code>insert into 表名（字段1， 字段2， 字段3..., 字段n) values(值1, 值2, 值3...值n);

insert into 表名 values(值1, 值2, 值3...值n);
</code></pre></div><h4 id="update"><a href="#update" class="header-anchor">#</a> update</h4> <div class="language- extra-class"><pre class="language-text"><code>update 表名 set 字段1 = 值1, 字段2 = 值2 where 条件;
</code></pre></div><h4 id="delete"><a href="#delete" class="header-anchor">#</a> delete</h4> <div class="language- extra-class"><pre class="language-text"><code>delete table 表名 where 条件;

</code></pre></div><h4 id="select"><a href="#select" class="header-anchor">#</a> select</h4> <p>单表查询    多表查询</p> <h2 id="查询"><a href="#查询" class="header-anchor">#</a> 查询</h2> <h4 id="单表查询"><a href="#单表查询" class="header-anchor">#</a> 单表查询</h4> <p>一条完整的单表查询语句</p> <div class="language- extra-class"><pre class="language-text"><code>select distinct 字段1,字段2,...  from 库.表 
    wehre 条件
    group by 分组条件
    having 过滤
    order by 排序字段
    limit n;

</code></pre></div><ul><li>字段名 as 别名      这样 给字起别名</li> <li>concat('xxx', 字段名, 字段名) as 别名     格式化字段  并起别名</li></ul> <h4 id="where-约束"><a href="#where-约束" class="header-anchor">#</a> where 约束</h4> <div class="language- extra-class"><pre class="language-text"><code>select * from tableName where id &gt; 7;

# 先找表,执行 from tableName
# 再where 
# 再打印 select 出来

select 字段1, 字段2 from employee where post='xxx' and salary&gt;8000;

select * from employee where salary &gt;=20000 and salary &lt;=3000
也可以这样写
seleet * from employee where salary between 20000 and 30000


select * from employee where salary &lt; 20000 or salary &gt;3000
也可以这样写
seleet * from employee where salary not between 20000 and 30000

select * from employee where age=73 or age = 81 or age = 28
上面写太累了, 可以下面这样写
select * from employee where age in (73,81,28)


select * from employee where post_comment is Null;
select * from employee where post_comment is not Null;

% 相当于  正则的  *    任意多字符
_  任意一个字符,  写 __ 是任意两个字符
select * from employee where name like &quot;jin%&quot;

</code></pre></div><h4 id="group-by"><a href="#group-by" class="header-anchor">#</a> group by</h4> <ul><li>首先明确一点，分组发生在where之后， 即分组是基于 where之后得到的记录而进行的</li> <li>分组指的是：将所有记录按照某个相同字段进行归类，　如员工信息表的职位分组，或按照性别分组</li> <li>为什么要分组呢
<ul><li>取每个部门的最高工资</li> <li>取每个部门的员工数</li> <li>取男人和女人数</li></ul></li> <li>不要用 unique的字段作为分组的依据,没意义</li> <li>没有分组,整体就是一个分组,也可惜使用聚合函数</li></ul> <p><strong>小窍门:＇每＇这个字后面的字段,就是我们分组的依据</strong></p> <div class="language- extra-class"><pre class="language-text"><code>select * from employee [where] group by post; 
分完组以后,只能查看分组的字段,(终端,会显示, 每一个分组的第一条记录,这样的数据没意义的
分组,你还看单独一条是没意思的, 
&gt; set global sql_mode=&quot;ONLY_FULL_GROUP_BY&quot;   严格模式就是只能查看分组的字段
)
也可以取每个组聚合的结果
</code></pre></div><h4 id="聚合函数"><a href="#聚合函数" class="header-anchor">#</a> 聚合函数</h4> <ul><li>max</li> <li>min</li> <li>avg</li> <li>sum</li> <li>count</li></ul> <div class="language- extra-class"><pre class="language-text"><code>每个职位有多少个员工
select post, count(id) as emp_count from employee groub by post
select post max(salar)  as emp_max_salar from employee groub by post
select post min(salar)  as emp_min_salar from employee groub by post
select post avg(salar)  as emp_avg_salar from employee groub by post
select post sum(age)  as emp_age from employee groub by post

</code></pre></div><p><strong>没有group by 则默认整个作一组</strong></p> <div class="language- extra-class"><pre class="language-text"><code>select max(salary) from employee
</code></pre></div><p><strong>group_concat</strong></p> <div class="language- extra-class"><pre class="language-text"><code>             拼接, 把分组的结果拼接起来
select post, group_concact(name) from employee group by post
</code></pre></div><h4 id="having-过滤"><a href="#having-过滤" class="header-anchor">#</a> having 过滤</h4> <p>having 是在 分组 group by 之后
where 是在 分组 group by 之前</p> <div class="language- extra-class"><pre class="language-text"><code>select post, group_concat(name), count(id) from employee group by post having count(id) &gt; 2;

select post, avg(salary) from employee group by post having avg(salary) &gt; 10000 and avg(salary) &lt; 20000;
</code></pre></div><h4 id="order-by-排序"><a href="#order-by-排序" class="header-anchor">#</a> order by 排序</h4> <div class="language- extra-class"><pre class="language-text"><code>
select * from employee order by age asc;    # asc 升序, 默认就是asc  降序 desc

select * from  employee order by age desc;  # 降序

select max(salary) from employee where max(salary) &gt; 1000;  这是一条错语的示例, where 后面不能用聚合函数

select post, count(id) as emp_count from employee where salary &gt; 1000 group by post having count(id) &gt; 5;

//                  这里还没执行  去重                                              这先执行, 执行时 as 还没执行
select distinct post, count(id) as emp_count from employee where salary &gt; 1000 group by post having emp_count &gt; 5;  # 错误示例,

</code></pre></div><h4 id="limit-限制条数"><a href="#limit-限制条数" class="header-anchor">#</a> limit 限制条数</h4> <div class="language- extra-class"><pre class="language-text"><code>select * from employee limit 3;

select * from employee order by salary desc limit 1;  #limit 1; 取一个

select * from employee limit 0, 5;   #  从第0个开始, 往后取5条

select * from employee limit 0, 5;   #  从第5个开始, 往后取5条

select * from employee limit 10, 5;  #  从第10个开始, 往后取5条

</code></pre></div><h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <div class="language- extra-class"><pre class="language-text"><code># 语法顺序

select distinct 字段1,字段2,...  from 库.表 
    wehre 条件
    group by 分组条件
    having 过滤
    order by 排序字段
    limit n;


执行顺序 :

def from (db, table):
    f = open(r'%s\%s'%(db,table))
    retrun f


def where(condition, f):
    for line in f:
        if condition:
            yield line


def group(lines):
    pass

def having(group_res):
    pass

def distinct(havcing_res):
    pass

def order(distinct_res):
    pass

def limit(order_res):
    pass


def select():
    f = from ('db1', 't1')
    lines = where('id&gt;3',f)
    group_res = group(lines)
    having_res = having(group_res)
    distinct_res = distinct(having_res)
    order_res = order(distinct_res)
    res = limit(order_res)
    print(res)
    return res
</code></pre></div><h4 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h4> <div class="language- extra-class"><pre class="language-text"><code>select * from employee where name like 'jin%';

select * from employee where name regexp '^jin';

select * from employee where name regexp '^jin.*(g|n)$';
</code></pre></div><h2 id="连表操作"><a href="#连表操作" class="header-anchor">#</a> 连表操作</h2> <div class="language- extra-class"><pre class="language-text"><code>// 笛卡儿集,  左表的记录, 都会和右边的每一项对应,  没什么意思, 但它简单暴的把两个表连起来
select * from employee, department;   
</code></pre></div><p>连表操作,就是在  笛卡儿集 的基础之上 筛选,有关系的数据</p> <h4 id="内连接"><a href="#内连接" class="header-anchor">#</a> 内连接</h4> <p>只取两张表的共同部分</p> <div class="language- extra-class"><pre class="language-text"><code>select * from employee inner join department on employee.dep_id = department.id [where]; 

再跟where 就是 做where 的事了

</code></pre></div><h4 id="左连接"><a href="#左连接" class="header-anchor">#</a> 左连接</h4> <p>在内连接的基础上保留左表的记录, 即便左表的记录和右表豪无对应关系</p> <div class="language- extra-class"><pre class="language-text"><code>select * from employee left join department on employee.dep_id = department.id;
</code></pre></div><h4 id="右连接"><a href="#右连接" class="header-anchor">#</a> 右连接</h4> <p>在内连接的基础上保留右表的记录, 即便右表的记录和左表豪无对应关系</p> <div class="language- extra-class"><pre class="language-text"><code>select * from employee right join department on employee.dep_id = department.id;
</code></pre></div><h4 id="全外连接"><a href="#全外连接" class="header-anchor">#</a> 全外连接</h4> <p>在内连接的基础上保留,没有对应关系的记录</p> <p>mysql 不支持 full join</p> <p>需要用 左连接 和右连接  配全,  用 union 把两个结果合起来</p> <div class="language- extra-class"><pre class="language-text"><code>select * from employee left join department on employee.dep_id = department.id
union
select * from employee right join department on employee.dep_id = department.id

</code></pre></div><p><strong>示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code># 查询平均年龄大于 30 岁的部门名
select departement.name, avg(age) from employee inner join department on employee.dep_id = departement.id
    group by departement.name 
    having avg(age) &gt; 30
</code></pre></div><p><strong>执行顺序</strong></p> <p>先执行 from 语句, 得到一张虚拟表
执行 on  过滤
添加 外部行  join
执行 group by 分组
执行 having
执行 select 列表
执行 distinct
执行 order by
执行 limit 子句</p> <h2 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h2> <p>子查询是将一条查询语句嵌套在另一个查询语句中</p> <div class="language- extra-class"><pre class="language-text"><code>查询平均年龄在25岁以上的部门名

select name from department where id in
(select dep_id from employee
    group by dep_id
    having avg(age)&gt;25)
    ;

其实等于之前学的
select name from department where id in (201, 202);

只不过现在是用 子查询了



查看技术部员工姓名
select name from employee where dep_id = (
select id from department where name = &quot;技术&quot;);


查看不足1人的部门名

select name from department where id not in (
    select distinct dep_id from employee
)


查询大于所有人平均年龄的员工名与年龄
select name, age from employee where age &gt; (
    select avg(age) from employee
)


带exists 关键字的查询

select * from employee
where EXISTS
(select id from department where name=&quot;技术&quot;);
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>select * from 
(select id, name sex from employee) as t1;   // 启一个表名,当做一个表来用

这样可以做到表和自己连接


# 每个部门最新入职的那名员工

select * from employee as t1
inner join
(select post, max(hire_date) as max_hire_date from employee
 group by ) as t2
 on t1.post = t2.post
 where t1.hire_date = t2.max_hire_date
</code></pre></div><h2 id="权限管理"><a href="#权限管理" class="header-anchor">#</a> 权限管理</h2> <p>1 创建账号
# 本地账号
create user 'username'@'localhost' identified by '123';<br>
#mysql -username -p123</p> <div class="language- extra-class"><pre><code># 远程账号              客户端的ip地址,  前端是 客户端能ping 通 mysql 服务器
create user 'username'@'192.168.31.10' identified by '123';  
create user 'username'@'192.168.31.%' identified by '123';  %表示任意
create user 'username'@'%' identified by '123';  所有网都能访问,当然需要无ping通
#mysql -username -p123 -h服务端ip
</code></pre></div><p>2 授权    要root 账号才能进行授权操作
user: <em>.</em>
db: db1.*
tables_priv: db1.t1
columns_priv: id, name</p> <div class="language- extra-class"><pre><code>grant all on *.* to 'username'@'localhost';  
grant select on *.* to 'username2'@'localhost'; 

revoke select on *.* from 'username2'@'localhost';


grant select on  db1.*  to 'username2'@'localhost'; 
revoke select on db1.* from 'username2'@'localhost';


grant select on db1.t2 to 'username2'@'localhost';
revoke select on db1.t2 to 'username2'@'localhost';

grant select(id,name), update(age) on db1.t3 to 'username2'@'localhost';
</code></pre></div><h2 id="navicat-工具"><a href="#navicat-工具" class="header-anchor">#</a> navicat  工具</h2> <p>一款管理mysql的可视化工具</p> <h2 id="pymysql"><a href="#pymysql" class="header-anchor">#</a> pymysql</h2> <p>需要先安装 pymysql 模块</p> <div class="language- extra-class"><pre class="language-text"><code>pip3 install pymysql
或
pipenv install pymysql
</code></pre></div><h4 id="基本使用"><a href="#基本使用" class="header-anchor">#</a> 基本使用</h4> <div class="language- extra-class"><pre class="language-text"><code>import pymysql

user = input('user&gt;&gt;: ').strip()
pwd = input('pwd&gt;&gt;: ').strip()

# 建立连接
conn = pymysql.connect(
    host=&quot;localhost&quot;,
    port=3306,
    user=&quot;yycu&quot;,
    password=&quot;001001001&quot;,
    db=&quot;db&quot;,
    charset=&quot;utf8&quot;
)

# 拿到游标  (就像我们在终端 光标闪闪等我们输入)
cursor = conn.cursor()

# 执行sql语句                       注意这里, 要包个引号, 记得你是在拼sql
sql = 'select * from user where user=&quot;%s&quot; and pwd=&quot;%s&quot;'% (user, pwd)
rows = cursor.execute(sql)   
# rows 拿到的是受影响的行数, 即在终端输入查询后,表格底提示的行数

# 关闭游标  关闭连接
cursor.close()
conn.close()

if rows:
    print(&quot;登录成功&quot;)
else: 
    print(&quot;登录失败&quot;)
</code></pre></div><h4 id="sql-注入"><a href="#sql-注入" class="header-anchor">#</a> sql 注入</h4> <p>还是上面的程序</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;user&gt;&gt;: yycu&quot; -- xxx
&gt;pawwword&gt;&gt;: 
</code></pre></div><p>这样即使密码不正确也可以查询成功
它实际拼出的sql 语句如下:</p> <div class="language- extra-class"><pre class="language-text"><code>select * from user where user=&quot;yycu&quot; -- xxx&quot; and pwd=&quot;&quot;
</code></pre></div><p>在sql语句中 -- 表示之后的内容都是注释了
这就是sql注入攻击, 需要防范.</p> <p><strong>不要自己拼接字符串</strong></p> <p>正确做法</p> <div class="language- extra-class"><pre class="language-text"><code>import pymysql

user = input('user&gt;&gt;: ').strip()
pwd = input('pwd&gt;&gt;: ').strip()

# 建立连接
conn = pymysql.connect(
    host=&quot;localhost&quot;,
    port=3306,
    user=&quot;yycu&quot;,
    password=&quot;001001001&quot;,
    db=&quot;db&quot;,
    charset=&quot;utf8&quot;
)

# 拿到游标  (就像我们在终端 光标闪闪等我们输入)
cursor = conn.cursor()

# 执行sql语句
#sql = 'select * from user where user=&quot;%s&quot; and pwd=&quot;%s&quot;'% (user, pwd)
sql = 'select * from user where user=%s and pwd=%s'
rows = cursor.execute(sql, (user, pwd))   
# 在cursor.execute 第二个参数以元素的形式传参,可以防止sql注入
# rows 拿到的是受影响的行数, 即在终端输入查询后,表格底提示的行数

# 关闭游标  关闭连接
cursor.close()
conn.close()

if rows:
    print(&quot;登录成功&quot;)
else: 
    print(&quot;登录失败&quot;)
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/backend/MySQL/" class="prev router-link-active">
        MySQL
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f104056c.js" defer></script><script src="/assets/js/2.f067c4ab.js" defer></script><script src="/assets/js/7.cbd050f5.js" defer></script>
  </body>
</html>
